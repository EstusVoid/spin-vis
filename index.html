<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta charset="UTF-8">
    <title>Spin | Visualisation</title>

    <link rel="stylesheet" href="css/style.min.css">
    <link rel="stylesheet" href="css/jquery-ui.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/src/FileSaver.js"></script>
    <script src="js/src/simulate.js"></script>
    <!-- <script src="js/src/download.js"></script> -->
    <script src="js/webglspins.min.js"></script>
    <!-- DEMO WEBGLSPINS: https://github.com/FlorianRhiem/WebGLSpins.js/blob/master/examples/demo.html -->

</head>

<body>
    <main>

        <header>
            <div class="name">
                Spin <span> Visualisation </span>
            </div>
        </header>
        <div class="grid">

            <section class="spin-grid">
                <div class="spin-grid__visible  resizable">
                    <!-- SPIN VISUALISATION -->

                    <canvas id="webgl-canvas"></canvas>

                </div>

                <div class="sidebar-grid__import   resizable">
                    <!-- import data -->
                    <div class="__content">
                        <textarea name="data" id="getdata"></textarea>
                    </div>
                </div>

                <div class="sidebar-grid__toolbar">
                    <!-- toolbar -->
                    <p>
                        <p>
                            <input type="file" id="file" accept=".txt"> Файл
                        </p>
                        <button type="button" onclick="simulateObject.downloadFile();">Сохранить</button>
                        <button type="button" onclick="simulateObject.simulateByData();">Отобразить</button>
                        <button type="button" onclick="simulateObject.simulateNew();">Сбросить</button>
                    </p>
                </div>
            </section>

        </div>

    </main>
    <script type='text/javascript'>
        $(document).ready(function() {
            simulateObject.simulateNew();
            const fileinput = document.getElementById('file');
            fileinput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                const reader = new FileReader();
                reader.addEventListener('load', (event) => {
                    let text = event.target.result;
                    parseToArrays(text, simulateObject);
                });
                reader.readAsText(file);
            });
        });
    </script>
    <script src="js/frontend.min.js"></script>
</body>

</html>